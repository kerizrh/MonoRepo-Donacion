<div class="detalle-wrapper" *ngIf="!cargando; else loadingTpl">
  <ng-container *ngIf="data; else errorTpl">

  
    <section class="hero" *ngIf="data.imagen">
      <img [src]="'data:image/*;base64,' + data.imagen" alt="Banner de campaÃ±a" />
      <a href="#detalleInfo" class="scroll-indicator" aria-label="Ver informaciÃ³n">â–¼</a>
    </section>

    <section *ngIf="!data.imagen" class="hero hero--sin-imagen">
      <h1>{{ data.nombre }}</h1>
      <a href="#detalleInfo" class="scroll-indicator" aria-label="Ver informaciÃ³n">â–¼</a>
    </section>

    <section id="detalleInfo" class="detalle-contenido">
      <h1 class="titulo">{{ data.nombre }}</h1>

      <div class="meta">
        <div><strong>Fecha:</strong> {{ data.fechaLimite }} ({{ fechaTexto }})</div>
        <div><strong>Meta:</strong> {{ data.metaFondos | currency:'USD':'symbol':'1.2-2' }}</div>
        <div><strong>Recaudado:</strong> {{ data.montoRecaudado | currency:'USD':'symbol':'1.2-2' }}</div>
        <div><strong>Progreso:</strong> {{ progreso }}%</div>
      </div>

      <div class="barra-progreso">
        <div class="barra" [style.width.%]="progreso"></div>
      </div>

      <div class="donacion-container" style="margin-top: 2rem; padding: 2rem; background-color: white; border: none; border-radius: 12px; text-align: center;">
  
  <h3 style="color: #0c0c0c; margin-bottom: 1rem;">Â¿Quieres apoyar esta causa?</h3>
  
  <p style="color: #374151; margin-bottom: 1.5rem;">
    Tu aporte hace la diferencia. AdemÃ¡s, recibirÃ¡s 
    <span style="font-weight: bold; color: #15803d;">puntos de recompensa</span> 
    por tu generosidad.
  </p>

  <button (click)="donar()" 
          style="background-color: #16a34a; color: white; padding: 0.75rem 2rem; font-size: 1.1rem; font-weight: bold; border: none; border-radius: 9999px; cursor: pointer; transition: background-color 0.2s; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">
    ðŸ’– Donar ahora
  </button>

</div>
      <h3>CategorÃ­as</h3>
      <div class="categorias">
        <span *ngFor="let cat of data.categorias" class="chip">{{ cat }}</span>
      </div>

      <h3>DescripciÃ³n</h3>
      <p class="descripcion">{{ data.descripcion || 'â€”' }}</p>
    </section>

  </ng-container>
</div>

<ng-template #loadingTpl>
  <p>Cargando...</p>
</ng-template>

<ng-template #errorTpl>
  <p style="color:#b00;">{{ error || 'No se pudo cargar la campaÃ±a.' }}</p>
</ng-template>
