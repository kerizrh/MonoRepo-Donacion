<div class="page-container" *ngIf="!cargando; else loadingTpl">
  <ng-container *ngIf="data; else errorTpl">

    <div class="layout-grid">
      
      <div class="main-column">
        
        <div class="media-container" *ngIf="data.imagen">
          <img [src]="'data:image/*;base64,' + data.imagen" alt="Banner de campa침a" />
        </div>
        
        <div *ngIf="!data.imagen" class="media-placeholder">
          <span>{{ data.nombre }}</span>
        </div>

        <div class="story-section">
          <h2 class="section-title big-text-color">Sobre esta campa침a</h2>
          <div class="descripcion">
            {{ data.descripcion || 'El organizador no ha proporcionado una descripci칩n detallada.' }}
          </div>
        </div>
      </div>

      <aside class="sidebar-column">
        <div class="donation-card">
          
          <h1 class="campaign-title">{{ data.nombre }}</h1>

          <div class="organizer-info">
            
            <img *ngIf="imagenCreador" 
                 [src]="'data:image/*;base64,' + imagenCreador" 
                 class="avatar-img" 
                 alt="Foto del organizador">

            <div *ngIf="!imagenCreador" class="avatar-placeholder">
              {{ nombreCreador.charAt(0).toUpperCase() }}
            </div>

            <div class="organizer-text">
              <span class="label">Organizador</span>
              <span class="name">{{ nombreCreador }}</span>
            </div>
          </div>

          <div class="tags-container">
            <span *ngFor="let cat of data.categorias" class="tag">{{ cat }}</span>
          </div>

          <div class="progress-section">
            <div class="bar-bg">
              <div class="bar-fill" [style.width.%]="progreso"></div>
            </div>
          </div>

          <div class="stats-display">
            <div class="amount-main">
              {{ data.montoRecaudado | currency:'USD':'symbol':'1.0-0' }}
              <span class="amount-goal">recaudados de {{ data.metaFondos | currency:'USD':'symbol':'1.0-0' }}</span>
            </div>
          </div>

          <button (click)="donar()" class="btn-donate-primary">
            游눘 Donar ahora
          </button>

        </div>
      </aside>

    </div>

  </ng-container>
</div>

<ng-template #loadingTpl>
  <div class="loading-state">Cargando campa침a...</div>
</ng-template>

<ng-template #errorTpl>
  <div class="error-state">{{ error || 'No se pudo cargar la campa침a.' }}</div>
</ng-template>